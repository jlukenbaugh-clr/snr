<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LTE Link Quality Rater</title>
    <style>
        body { font-family: monospace; max-width: 600px; margin: 50px auto; padding: 20px; }
        input { width: 100px; padding: 5px; margin: 5px; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; cursor: pointer; }
        .rating { font-weight: bold; padding: 10px; margin: 10px 0; border-radius: 5px; }
        .great { background: #d4edda; color: #155724; }
        .good { background: #d1ecf1; color: #0c5460; }
        .fair { background: #fff3cd; color: #856404; }
        .poor, .bad { background: #f8d7da; color: #721c24; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    </style>
</head>
<body>
    <h1>LTE Modem Link Quality Rater</h1>
    <p>Enter values from your modem (e.g., Goff-6). Clicks "Rate" for per-metric and overall rating.</p>
    
    <form id="signalForm">
        <label>RSSI (dBm): <input type="number" id="rssi" step="0.1" placeholder="-74" required></label><br>
        <label>RSRP (dBm): <input type="number" id="rsrp" step="0.1" placeholder="-105" required></label><br>
        <label>RSRQ (dB): <input type="number" id="rsrq" step="0.1" placeholder="-13" required></label><br>
        <label>SINR (dB): <input type="number" id="sinr" step="0.1" placeholder="9" required></label><br>
        <button type="submit">Rate Link</button>
    </form>
    
    <div id="results"></div>

    <script>
        document.getElementById('signalForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const rssi = parseFloat(document.getElementById('rssi').value);
            const rsrp = parseFloat(document.getElementById('rsrp').value);
            const rsrq = parseFloat(document.getElementById('rsrq').value);
            const sinr = parseFloat(document.getElementById('sinr').value);
            
            // Rate functions using your exact thresholds
            function rateRSSI(val) {
                if (val >= -75 && val <= -65) return {text: 'Good', class: 'good'};
                if (val > -85 && val <= -75) return {text: 'Fair', class: 'fair'};
                return {text: 'Poor', class: 'poor'};
            }
            
            function rateRSRP(val) {
                if (val > -85) return {text: 'Great', class: 'great'};
                if (val > -100) return {text: 'Good', class: 'good'};
                return {text: 'Poor', class: 'poor'};
            }
            
            function rateRSRQ(val) {
                if (val > -5) return {text: 'Great', class: 'great'};
                if (val >= -8) return {text: 'Good', class: 'good'};
                return {text: 'Bad', class: 'bad'};
            }
            
            function rateSINR(val) {
                if (val > 20) return {text: 'Great', class: 'great'};
                if (val >= 13) return {text: 'Good', class: 'good'};
                if (val >= 0) return {text: 'Fair/Poor', class: 'fair'};
                return {text: 'Very Poor', class: 'poor'};
            }
            
            const rssiRate = rateRSSI(rssi);
            const rsrpRate = rateRSRP(rsrp);
            const rsrqRate = rateRSRQ(rsrq);
            const sinrRate = rateSINR(sinr);
            
            // Overall: count bad/poor/fair
            const poorCount = [rssiRate.class, rsrpRate.class, rsrqRate.class, sinrRate.class]
                .filter(c => c === 'poor' || c === 'bad').length;
            const fairCount = [rssiRate.class, rsrpRate.class, rsrqRate.class, sinrRate.class]
                .filter(c => c === 'fair').length;
            
            let overall = 'Great';
            let overallClass = 'great';
            if (poorCount >= 2) { overall = 'Poor'; overallClass = 'poor'; }
            else if (poorCount >= 1 || fairCount >= 2) { overall = 'Fair'; overallClass = 'fair'; }
            else if (fairCount >= 1) { overall = 'Good'; overallClass = 'good'; }
            
            // Output
            let html = `
                <div class="rating ${rssiRate.class}">RSSI ${rssi} dBm: ${rssiRate.text}</div>
                <div class="rating ${rsrpRate.class}">RSRP ${rsrp} dBm: ${rsrpRate.text}</div>
                <div class="rating ${rsrqRate.class}">RSRQ ${rsrq} dB: ${rsrqRate.text}</div>
                <div class="rating ${sinrRate.class}">SINR ${sinr} dB: ${sinrRate.text}</div>
                <h3>Overall Link Quality: <span class="rating ${overallClass}">${overall}</span></h3>
                <table>
                    <tr><th>Metric</th><th>Value</th><th>Rating</th></tr>
                    <tr><td>RSSI</td><td>${rssi}</td><td>${rssiRate.text}</td></tr>
                    <tr><td>RSRP</td><td>${rsrp}</td><td>${rsrpRate.text}</td></tr>
                    <tr><td>RSRQ</td><td>${rsrq}</td><td>${rsrqRate.text}</td></tr>
                    <tr><td>SINR</td><td>${sinr}</td><td>${sinrRate.text}</td></tr>
                </table>
            `;
            document.getElementById('results').innerHTML = html;
        });
    </script>
</body>
</html>
